From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Lex Manos <LexManos@gmail.com>
Date: Thu, 22 Oct 2015 16:14:59 -0700
Subject: [PATCH] Fixed switch cases leaking variables incorrectly.


diff --git a/src/org/jetbrains/java/decompiler/modules/decompiler/vars/VarDefinitionHelper.java b/src/org/jetbrains/java/decompiler/modules/decompiler/vars/VarDefinitionHelper.java
index e026ca264313b3949dee800eca91db7ecac377ff..dd805eb485cbd6934c72218bb7a38471c9e4c122 100644
--- a/src/org/jetbrains/java/decompiler/modules/decompiler/vars/VarDefinitionHelper.java
+++ b/src/org/jetbrains/java/decompiler/modules/decompiler/vars/VarDefinitionHelper.java
@@ -648,6 +648,9 @@ public class VarDefinitionHelper {
               if (obj == stat.getFirst()) {
                 leaked.putAll(leaked_n); //First is outside the scope so leak!
               }
+              else {
+                leaked_n.clear();
+              }
             }
             else if (stat.type == Statement.TYPE_TRYCATCH ||
                      stat.type == Statement.TYPE_CATCHALL) {
